    <h2 id="window">Window</h2>
    <p>
      The classic Aqua window with brushed metal title bar and traffic light buttons
      (close, minimize, maximize/zoom).
    </p>

    <%- example(`
      <div class="window">
        <div class="title-bar">
          <div class="traffic-lights traffic-lights--always-colored">
            <div class="aqua-light aqua-red" role="button" tabindex="0" aria-label="Close"><span class="icon">×</span></div>
            <div class="aqua-light aqua-yellow" role="button" tabindex="0" aria-label="Minimize"><span class="icon">−</span></div>
            <div class="aqua-light aqua-green" role="button" tabindex="0" aria-label="Maximize"><span class="icon">+</span></div>
          </div>
          <div class="title-bar-text">My Window</div>
        </div>
        <div class="window-body">
          <p>This is a window with Aqua styling.</p>
        </div>
      </div>
    `) %>

    <h3>Inactive Window</h3>
    <p>Windows that are not in focus have grayed-out traffic lights.</p>

    <%- example(`
      <div class="window inactive">
        <div class="title-bar">
          <div class="traffic-lights">
            <div class="aqua-light aqua-red" role="button" tabindex="0" aria-label="Close"><span class="icon">×</span></div>
            <div class="aqua-light aqua-yellow" role="button" tabindex="0" aria-label="Minimize"><span class="icon">−</span></div>
            <div class="aqua-light aqua-green" role="button" tabindex="0" aria-label="Maximize"><span class="icon">+</span></div>
          </div>
          <div class="title-bar-text">Inactive Window</div>
        </div>
        <div class="window-body">
          <p>This window is not focused.</p>
        </div>
      </div>
    `) %>

    <h3 id="brushed-metal">Brushed Metal</h3>
    <p>
      Authentic brushed metal texture from Mac OS X 10.3-10.5 era (2003-2007).
      Used in iTunes, QuickTime Player, Finder, and Safari.
    </p>
    <p>
      <strong>Note:</strong> The authentic brushed metal effect requires canvas-based
      rendering with p5.js to accurately recreate the horizontal grain striations and
      Perlin noise texture. CSS gradients can only approximate the effect.
    </p>

    <%- example(`
      <div class="window" style="width: 100%; max-width: 520px; position: relative; overflow: hidden;">
        <!-- Metal canvas renders behind everything -->
        <div id="metal-container" style="position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 0;"></div>

        <!-- Title bar overlays the metal (transparent background) -->
        <div class="title-bar" style="background: transparent; position: relative; z-index: 1; border-bottom: none;">
          <div class="traffic-lights traffic-lights--always-colored">
            <div class="aqua-light aqua-red" role="button" tabindex="0" aria-label="Close"><span class="icon">×</span></div>
            <div class="aqua-light aqua-yellow" role="button" tabindex="0" aria-label="Minimize"><span class="icon">−</span></div>
            <div class="aqua-light aqua-green" role="button" tabindex="0" aria-label="Maximize"><span class="icon">+</span></div>
          </div>
          <!-- Title centered across full width, overlapping traffic lights layer -->
          <div class="title-bar-text" style="position: absolute; left: 0; right: 0; text-align: center; pointer-events: none;">Window</div>
        </div>

        <!-- Window body is also transparent -->
        <div class="window-body" style="background: transparent; position: relative; z-index: 1; min-height: 280px;">
        </div>
      </div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"><\/script>
      <script>
        function setup() {
          let container = document.getElementById('metal-container');
          let c = createCanvas(container.offsetWidth, container.offsetHeight);
          c.parent('metal-container');
          pixelDensity(1);
          noLoop();
          drawMetal();
        }

        function drawMetal() {
          loadPixels();

          let centerX = width / 2;
          let baseGray = 163;
          let lightBrightness = 41;
          let noiseStrength = 20;
          let lightConcentration = 1.8;

          for (let y = 0; y < height; y++) {
            let rowOffset = random(0, 10000);

            for (let x = 0; x < width; x++) {
              let index = (x + y * width) * 4;

              // Horizontal grain texture using Perlin noise
              let n = noise(x * 0.02 + rowOffset);
              let grain = map(n, 0, 1, -noiseStrength, noiseStrength);

              // Center specular highlight (Gaussian falloff)
              let normDist = (x - centerX) / (width / 2);
              let light = Math.exp(-Math.pow(normDist * lightConcentration, 2)) * lightBrightness;

              let finalColor = constrain(baseGray + light + grain, 0, 255);

              pixels[index + 0] = finalColor;
              pixels[index + 1] = finalColor;
              pixels[index + 2] = finalColor;
              pixels[index + 3] = 255;
            }
          }
          updatePixels();
        }
      <\/script>
    `) %>

    <h4>CSS + SVG Filter Implementation</h4>
    <p>
      Alternative approach using SVG filters for the brushed texture. This method uses
      <code>feTurbulence</code> for procedural noise and doesn't require JavaScript.
    </p>

    <%- example(`
      <div class="metal-window" style="width: 100%; max-width: 520px; position: relative; overflow: hidden; border-radius: 8px; box-shadow: 0 10px 30px rgba(0,0,0,0.3);">
        <!-- Brushed-metal backplate (higher-res filter + grayscale-safe) -->
        <svg class="metal-bg" viewBox="0 0 520 320" preserveAspectRatio="none" aria-hidden="true" style="position:absolute; inset:0; width:100%; height:100%; pointer-events:none; transform: scale(1.02); z-index: 0;">
          <defs>
            <!-- Cylindrical "Apple-ish" sheen -->
            <linearGradient id="metalSheen" x1="0" y1="0" x2="1" y2="0">
              <stop offset="0%"   stop-color="rgb(155,155,155)"/>
              <stop offset="22%"  stop-color="rgb(165,165,165)"/>
              <stop offset="40%"  stop-color="rgb(188,188,188)"/>
              <stop offset="50%"  stop-color="rgb(204,204,204)"/>
              <stop offset="60%"  stop-color="rgb(188,188,188)"/>
              <stop offset="78%"  stop-color="rgb(165,165,165)"/>
              <stop offset="100%" stop-color="rgb(155,155,155)"/>
            </linearGradient>

            <!-- Subtle vertical gloss -->
            <linearGradient id="verticalGloss" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0%"   stop-color="white" stop-opacity="0.18"/>
              <stop offset="38%"  stop-color="white" stop-opacity="0.06"/>
              <stop offset="100%" stop-color="white" stop-opacity="0.00"/>
            </linearGradient>

            <!-- Brushed texture (rendered at higher resolution) -->
            <filter id="metalTexture"
                    x="-20%" y="-20%" width="140%" height="140%"
                    filterRes="1600 900"
                    color-interpolation-filters="sRGB">

              <!-- Coarse "brush" (row-varying, smeared horizontally) -->
              <feTurbulence type="fractalNoise"
                            baseFrequency="0.010 0.75"
                            numOctaves="1"
                            seed="11"
                            result="coarse"/>
              <feGaussianBlur in="coarse" stdDeviation="12 0" result="coarseStreak"/>

              <!-- Fine grain (tighter, still horizontally smeared) -->
              <feTurbulence type="fractalNoise"
                            baseFrequency="0.060 1.10"
                            numOctaves="2"
                            seed="3"
                            result="fine"/>
              <feGaussianBlur in="fine" stdDeviation="1.2 0" result="fineStreak"/>

              <!-- Mix coarse + fine -->
              <feComposite in="coarseStreak" in2="fineStreak"
                           operator="arithmetic"
                           k1="0" k2="0.82" k3="0.18" k4="0"
                           result="mix"/>

              <!-- Force grayscale (prevents "rainbow" tinting) -->
              <feColorMatrix in="mix" type="saturate" values="0" result="mixGray"/>

              <!-- Keep it subtle / clean -->
              <feComponentTransfer in="mixGray" result="mixSubtle">
                <feFuncR type="linear" slope="1.10" intercept="-0.05"/>
                <feFuncG type="linear" slope="1.10" intercept="-0.05"/>
                <feFuncB type="linear" slope="1.10" intercept="-0.05"/>
              </feComponentTransfer>

              <!-- Apply texture in a "metal" way (less muddy than arithmetic) -->
              <feBlend in="SourceGraphic" in2="mixSubtle" mode="soft-light" result="textured"/>
            </filter>
          </defs>

          <!-- Base sheen + texture -->
          <rect x="0" y="0" width="520" height="320"
                fill="url(#metalSheen)"
                filter="url(#metalTexture)"/>

          <!-- Vertical gloss -->
          <rect x="0" y="0" width="520" height="320" fill="url(#verticalGloss)"/>
        </svg>

        <!-- Title bar -->
        <div class="title-bar" style="background: transparent; position: relative; z-index: 1; border-bottom: none;">
          <div class="traffic-lights traffic-lights--always-colored">
            <div class="aqua-light aqua-red" role="button" tabindex="0" aria-label="Close"><span class="icon">×</span></div>
            <div class="aqua-light aqua-yellow" role="button" tabindex="0" aria-label="Minimize"><span class="icon">−</span></div>
            <div class="aqua-light aqua-green" role="button" tabindex="0" aria-label="Maximize"><span class="icon">+</span></div>
          </div>
          <div class="title-bar-text" style="position: absolute; left: 0; right: 0; text-align: center; pointer-events: none;">Window</div>
        </div>

        <!-- Window body -->
        <div class="window-body" style="background: transparent; position: relative; z-index: 1; min-height: 280px;"></div>
      </div>
    `) %>

