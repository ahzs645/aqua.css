/**
 * Traffic Lights
 * Mac OS X Aqua-style window control buttons (close, minimize, zoom)
 */

@use "mixins" as *;

/* Traffic Lights Container */
.traffic-lights {
  display: flex;
  gap: 8px;
  align-items: center;
}

/* Base Aqua Light Style */
.aqua-light {
  --button-size: 14px;
  position: relative;
  width: var(--button-size);
  height: var(--button-size);
  font-size: var(--button-size);
  border-radius: 50%;
  border: none;
  padding: 0;
  cursor: pointer;
  transition: all 0.15s ease;
  overflow: hidden;

  /* Gray/inactive state by default */
  background: var(--traffic-light-inactive-gradient);
  box-shadow: var(--traffic-light-inactive-shadow);

  /* Aqua glass effect (top shine + bottom glow) */
  @include aqua-glass('round');
}

/* Icon styles - hidden by default */
.aqua-light .icon {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -55%);
  font-size: 1em;
  font-weight: bold;
  line-height: 1;
  opacity: 0;
  z-index: 10;
  transition: opacity 0.1s ease;
}

.aqua-red .icon {
  color: var(--traffic-light-icon-red);
  text-shadow: var(--traffic-light-icon-red-shadow);
}

.aqua-yellow .icon {
  color: var(--traffic-light-icon-yellow);
  text-shadow: var(--traffic-light-icon-yellow-shadow);
}

.aqua-green .icon {
  color: var(--traffic-light-icon-green);
  text-shadow: var(--traffic-light-icon-green-shadow);
}

/* Show ALL icons when hovering over the container */
.traffic-lights:hover .aqua-light:not(.aqua-inactive) .icon {
  opacity: 1;
}

/* Close - Red (on hover) */
.traffic-lights:hover .aqua-red:not(.aqua-inactive) {
  background: var(--traffic-light-red-gradient);
  box-shadow: var(--traffic-light-red-shadow);
}

/* Minimize - Yellow/Orange (on hover) */
.traffic-lights:hover .aqua-yellow:not(.aqua-inactive) {
  background: var(--traffic-light-yellow-gradient);
  box-shadow: var(--traffic-light-yellow-shadow);
}

/* Maximize - Green (on hover) */
.traffic-lights:hover .aqua-green:not(.aqua-inactive) {
  background: var(--traffic-light-green-gradient);
  box-shadow: var(--traffic-light-green-shadow);
}

/* Permanently inactive */
.aqua-inactive {
  background: var(--traffic-light-inactive-gradient) !important;
  box-shadow: var(--traffic-light-inactive-shadow) !important;
  cursor: default;
}

/* Pressed state */
.traffic-lights:hover .aqua-light:active {
  filter: brightness(0.85);
  transition: none;
}

/* Size variations */
.traffic-lights--large .aqua-light {
  --button-size: 32px;
}

.traffic-lights--small .aqua-light {
  --button-size: 10px;
}

/* Always show colors (for demo/static display) */
.traffic-lights--always-colored .aqua-red:not(.aqua-inactive) {
  background: var(--traffic-light-red-gradient);
  box-shadow: var(--traffic-light-red-shadow);
}

.traffic-lights--always-colored .aqua-yellow:not(.aqua-inactive) {
  background: var(--traffic-light-yellow-gradient);
  box-shadow: var(--traffic-light-yellow-shadow);
}

.traffic-lights--always-colored .aqua-green:not(.aqua-inactive) {
  background: var(--traffic-light-green-gradient);
  box-shadow: var(--traffic-light-green-shadow);
}

/* Unsaved document indicator (dot in close button) */
.aqua-red.unsaved .icon {
  display: none;
}

.aqua-red.unsaved::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 5px;
  height: 5px;
  background: var(--traffic-light-unsaved-dot);
  border-radius: 50%;
  filter: none;
  z-index: 5;
}

.traffic-lights--large .aqua-red.unsaved::after {
  width: 10px;
  height: 10px;
}

.traffic-lights--small .aqua-red.unsaved::after {
  width: 3px;
  height: 3px;
}

/* SVG icon styles (for Panther variant) */
.traffic-lights--panther .icon-svg {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  width: 45%;
  height: 45%;
  opacity: 0;
  z-index: 10;
  transition: opacity 0.1s ease;
}

.traffic-lights--panther .aqua-red .icon-svg {
  color: var(--traffic-light-icon-red);
}

.traffic-lights--panther .aqua-yellow .icon-svg {
  color: var(--traffic-light-icon-yellow);
}

.traffic-lights--panther .aqua-green .icon-svg {
  color: var(--traffic-light-icon-green);
}

.traffic-lights--panther:hover .aqua-light:not(.aqua-inactive) .icon-svg {
  opacity: 1;
}

/* RYOS Variant - Pure colored circles, no icons */
.traffic-lights--ryos .aqua-light {
  width: 13px;
  height: 13px;
}

.traffic-lights--ryos .aqua-red:not(.aqua-inactive) {
  background: var(--traffic-light-red-gradient);
  box-shadow: var(--traffic-light-ryos-red-shadow);
}

.traffic-lights--ryos .aqua-yellow:not(.aqua-inactive) {
  background: var(--traffic-light-yellow-gradient);
  box-shadow: var(--traffic-light-ryos-yellow-shadow);
}

.traffic-lights--ryos .aqua-green:not(.aqua-inactive) {
  background: var(--traffic-light-green-gradient);
  box-shadow: var(--traffic-light-ryos-green-shadow);
}

.traffic-lights--ryos .icon {
  display: none !important;
}
