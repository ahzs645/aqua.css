/**
 * Mixins
 * Reusable SCSS mixins for Aqua-style effects
 */

/**
 * Aqua Glass Effect
 * Creates the signature Mac OS X Aqua glossy appearance with:
 * - Top highlight/shine (::before pseudo-element)
 * - Bottom glow reflection (::after pseudo-element)
 *
 * @param $shape - Shape preset with component-specific defaults:
 *   'circle'  - Traffic lights, round buttons (default)
 *   'pill'    - Aqua buttons
 *   'spinner' - Pinwheel spinner
 *   'bubble'  - Chat bubbles
 *   'tab'     - Tab buttons
 *   'switch'  - Toggle switch thumb
 *   'toast'   - Toast action buttons (shine only)
 */
@mixin aqua-glass-effect($shape: 'circle') {
  // Default values (circle - traffic lights)
  $shine-height: 40%;
  $shine-width: 70%;
  $shine-top: 8%;
  $shine-blur: 0.5px;
  $shine-opacity-start: 0.9;
  $shine-opacity-end: 0.2;
  $shine-radius: 50% 50% 30% 30%;
  $shine-z-index: 2;

  $glow-height: 30%;
  $glow-width: 60%;
  $glow-bottom: 10%;
  $glow-blur: 1px;
  $glow-opacity-start: 0.1;
  $glow-opacity-end: 0.4;
  $glow-radius: 50%;
  $glow-z-index: null;

  $include-glow: true;

  @if $shape == 'pill' {
    // Aqua buttons
    $shine-height: 33%;
    $shine-top: 5%;
    $shine-blur: 1px;
    $shine-opacity-end: 0.3;
    $shine-radius: 2em 2em 0.5em 0.5em;

    $glow-height: 33%;
    $glow-blur: 3px;
    $glow-opacity-start: 0.2;
    $glow-opacity-end: 0.5;
    $glow-radius: 0.75em;
  } @else if $shape == 'spinner' {
    // Pinwheel spinner
    $shine-top: 5%;
    $shine-blur: 1px;
    $shine-opacity-start: 0.7;
    $shine-opacity-end: 0.1;
    $shine-radius: 50% 50% 40% 40%;
    $shine-z-index: 20;

    $glow-bottom: 8%;
    $glow-blur: 1px;
    $glow-opacity-start: 0.05;
    $glow-opacity-end: 0.25;
    $glow-z-index: 20;
  } @else if $shape == 'bubble' {
    // Chat bubbles
    $shine-height: 12px;
    $shine-width: calc(100% - 12px);
    $shine-top: 2px;
    $shine-blur: 0.5px;
    $shine-opacity-start: 0.9;
    $shine-opacity-end: 0.25;
    $shine-radius: 16px 16px 4px 4px;
    $shine-z-index: 1;

    $glow-height: 20px;
    $glow-width: 100%;
    $glow-bottom: 0;
    $glow-blur: 0.6px;
    $glow-opacity-start: 0;
    $glow-opacity-end: 0.45;
    $glow-radius: 4px;
    $glow-z-index: 1;
  } @else if $shape == 'tab' {
    // Tab buttons
    $shine-height: 15%;
    $shine-width: calc(100% - 2px);
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.55;
    $shine-opacity-end: 0.25;
    $shine-radius: 4px 4px 0 0;
    $shine-z-index: 10;

    $glow-height: 20%;
    $glow-width: calc(100% - 2px);
    $glow-bottom: 0;
    $glow-blur: 1px;
    $glow-opacity-start: 0;
    $glow-opacity-end: 0.35;
    $glow-radius: 0 0 2px 2px;
    $glow-z-index: 10;
  } @else if $shape == 'switch' {
    // Toggle switch thumb
    $shine-height: 30%;
    $shine-width: 50%;
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.9;
    $shine-opacity-end: 0.3;
    $shine-radius: 9999px;
    $shine-z-index: 2;

    $glow-height: 40%;
    $glow-width: 80%;
    $glow-bottom: 1px;
    $glow-blur: 0.5px;
    $glow-opacity-start: 0.2;
    $glow-opacity-end: 0.5;
    $glow-radius: 9999px;
    $glow-z-index: 1;
  } @else if $shape == 'toast' {
    // Toast action buttons (shine only, no glow)
    $shine-height: 40%;
    $shine-width: 80%;
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.8;
    $shine-opacity-end: 0.2;
    $shine-radius: 10px 10px 2px 2px;
    $shine-z-index: 1;

    $include-glow: false;
  } @else if $shape == 'progress' {
    // Progress bar (indeterminate)
    $shine-height: 50%;
    $shine-width: 100%;
    $shine-top: 0;
    $shine-blur: 0;
    $shine-opacity-start: 0.7;
    $shine-opacity-end: 0.1;
    $shine-radius: 2.5px 2.5px 0 0;
    $shine-z-index: 2;

    $glow-height: 40%;
    $glow-width: 100%;
    $glow-bottom: 0;
    $glow-blur: 0;
    $glow-opacity-start: 0;
    $glow-opacity-end: 0.7;
    $glow-radius: 0 0 2.5px 2.5px;
    $glow-z-index: 2;
  } @else if $shape == 'control' {
    // Form controls (checkbox, radio, pagination buttons)
    $shine-height: 45%;
    $shine-width: 90%;
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.6;
    $shine-opacity-end: 0.1;
    $shine-radius: 2px 2px 1px 1px;
    $shine-z-index: 1;

    $glow-height: 40%;
    $glow-width: 90%;
    $glow-bottom: 1px;
    $glow-blur: 0;
    $glow-opacity-start: 0.05;
    $glow-opacity-end: 0.25;
    $glow-radius: 1px 1px 2px 2px;
    $glow-z-index: 1;
  } @else if $shape == 'control-round' {
    // Round form controls (radio buttons)
    $shine-height: 40%;
    $shine-width: 80%;
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.6;
    $shine-opacity-end: 0.1;
    $shine-radius: 50% 50% 30% 30%;
    $shine-z-index: 1;

    $glow-height: 35%;
    $glow-width: 80%;
    $glow-bottom: 1px;
    $glow-blur: 0;
    $glow-opacity-start: 0.05;
    $glow-opacity-end: 0.25;
    $glow-radius: 30% 30% 50% 50%;
    $glow-z-index: 1;
  } @else if $shape == 'header' {
    // Table headers, titled pane headers (flat bars)
    $shine-height: 50%;
    $shine-width: 100%;
    $shine-top: 0;
    $shine-blur: 0;
    $shine-opacity-start: 0.4;
    $shine-opacity-end: 0.05;
    $shine-radius: 0;
    $shine-z-index: 1;

    $glow-height: 30%;
    $glow-width: 100%;
    $glow-bottom: 0;
    $glow-blur: 0;
    $glow-opacity-start: 0;
    $glow-opacity-end: 0.2;
    $glow-radius: 0;
    $glow-z-index: 1;
  } @else if $shape == 'stepper' {
    // Stepper/spinner buttons
    $shine-height: 45%;
    $shine-width: 100%;
    $shine-top: 0;
    $shine-blur: 0;
    $shine-opacity-start: 0.5;
    $shine-opacity-end: 0.1;
    $shine-radius: 0;
    $shine-z-index: 1;

    $glow-height: 35%;
    $glow-width: 100%;
    $glow-bottom: 0;
    $glow-blur: 0;
    $glow-opacity-start: 0.05;
    $glow-opacity-end: 0.2;
    $glow-radius: 0;
    $glow-z-index: 1;
  } @else if $shape == 'select' {
    // Select dropdown
    $shine-height: 50%;
    $shine-width: calc(100% - 8px);
    $shine-top: 0;
    $shine-blur: 0;
    $shine-opacity-start: 0.5;
    $shine-opacity-end: 0.1;
    $shine-radius: 3px 3px 0 0;
    $shine-z-index: 1;

    $glow-height: 35%;
    $glow-width: calc(100% - 8px);
    $glow-bottom: 0;
    $glow-blur: 0;
    $glow-opacity-start: 0.05;
    $glow-opacity-end: 0.25;
    $glow-radius: 0 0 3px 3px;
    $glow-z-index: 1;
  } @else if $shape == 'slider-thumb' {
    // Slider thumb (round)
    $shine-height: 40%;
    $shine-width: 80%;
    $shine-top: 1px;
    $shine-blur: 0;
    $shine-opacity-start: 0.7;
    $shine-opacity-end: 0.15;
    $shine-radius: 50% 50% 30% 30%;
    $shine-z-index: 1;

    $glow-height: 35%;
    $glow-width: 80%;
    $glow-bottom: 1px;
    $glow-blur: 0;
    $glow-opacity-start: 0.1;
    $glow-opacity-end: 0.35;
    $glow-radius: 30% 30% 50% 50%;
    $glow-z-index: 1;
  }

  // Top shine
  &::before {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: $shine-height;
    width: $shine-width;
    top: $shine-top;
    background: linear-gradient(
      rgba(255, 255, 255, $shine-opacity-start),
      rgba(255, 255, 255, $shine-opacity-end)
    );
    border-radius: $shine-radius;
    @if $shine-blur != 0 {
      filter: blur($shine-blur);
    }
    z-index: $shine-z-index;
    pointer-events: none;
  }

  // Bottom glow (conditionally included)
  @if $include-glow {
    &::after {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      height: $glow-height;
      width: $glow-width;
      bottom: $glow-bottom;
      background: linear-gradient(
        rgba(255, 255, 255, $glow-opacity-start),
        rgba(255, 255, 255, $glow-opacity-end)
      );
      border-radius: $glow-radius;
      @if $glow-blur != 0 {
        filter: blur($glow-blur);
      }
      @if $glow-z-index {
        z-index: $glow-z-index;
      }
      pointer-events: none;
    }
  }
}

/**
 * Aqua Glass Shine Only
 * Just the top highlight, useful when ::after is needed for other purposes
 */
@mixin aqua-glass-shine($shape: 'circle') {
  $height: 40%;
  $width: 70%;
  $top: 8%;
  $blur: 0.5px;
  $opacity-start: 0.9;
  $opacity-end: 0.2;
  $radius: 50% 50% 30% 30%;
  $z-index: 2;

  @if $shape == 'pill' {
    $height: 33%;
    $top: 5%;
    $blur: 1px;
    $opacity-end: 0.3;
    $radius: 2em 2em 0.5em 0.5em;
  } @else if $shape == 'spinner' {
    $top: 5%;
    $blur: 1px;
    $opacity-start: 0.7;
    $opacity-end: 0.1;
    $radius: 50% 50% 40% 40%;
    $z-index: 20;
  } @else if $shape == 'menubar' {
    // Menu bar top gloss
    $height: 50%;
    $width: 100%;
    $top: 0;
    $blur: 0;
    $opacity-start: 0.3;
    $opacity-end: 0.1;
    $radius: 0;
    $z-index: 1;
  } @else if $shape == 'control' {
    // Form controls (checkbox, radio, pagination buttons)
    $height: 45%;
    $width: 90%;
    $top: 1px;
    $blur: 0;
    $opacity-start: 0.6;
    $opacity-end: 0.1;
    $radius: 2px 2px 1px 1px;
    $z-index: 1;
  } @else if $shape == 'control-round' {
    // Round form controls (radio buttons)
    $height: 40%;
    $width: 80%;
    $top: 1px;
    $blur: 0;
    $opacity-start: 0.6;
    $opacity-end: 0.1;
    $radius: 50% 50% 30% 30%;
    $z-index: 1;
  } @else if $shape == 'header' {
    // Table headers, titled pane headers
    $height: 50%;
    $width: 100%;
    $top: 0;
    $blur: 0;
    $opacity-start: 0.4;
    $opacity-end: 0.05;
    $radius: 0;
    $z-index: 1;
  } @else if $shape == 'stepper' {
    // Stepper/spinner buttons
    $height: 45%;
    $width: 100%;
    $top: 0;
    $blur: 0;
    $opacity-start: 0.5;
    $opacity-end: 0.1;
    $radius: 0;
    $z-index: 1;
  }

  &::before {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: $height;
    width: $width;
    top: $top;
    background: linear-gradient(
      rgba(255, 255, 255, $opacity-start),
      rgba(255, 255, 255, $opacity-end)
    );
    border-radius: $radius;
    @if $blur != 0 {
      filter: blur($blur);
    }
    z-index: $z-index;
    pointer-events: none;
  }
}

/**
 * Aqua Glass Glow Only
 * Just the bottom glow, useful when ::before is needed for other purposes
 */
@mixin aqua-glass-glow($shape: 'circle') {
  $height: 30%;
  $width: 60%;
  $bottom: 10%;
  $blur: 1px;
  $opacity-start: 0.1;
  $opacity-end: 0.4;
  $radius: 50%;
  $z-index: null;

  @if $shape == 'pill' {
    $height: 33%;
    $blur: 3px;
    $opacity-start: 0.2;
    $opacity-end: 0.5;
    $radius: 0.75em;
  } @else if $shape == 'spinner' {
    $bottom: 8%;
    $blur: 1px;
    $opacity-start: 0.05;
    $opacity-end: 0.25;
    $z-index: 20;
  }

  &::after {
    content: '';
    position: absolute;
    left: 50%;
    transform: translateX(-50%);
    height: $height;
    width: $width;
    bottom: $bottom;
    background: linear-gradient(
      rgba(255, 255, 255, $opacity-start),
      rgba(255, 255, 255, $opacity-end)
    );
    border-radius: $radius;
    @if $blur != 0 {
      filter: blur($blur);
    }
    @if $z-index {
      z-index: $z-index;
    }
    pointer-events: none;
  }
}
