/**
 * Window
 * Mac OS X Aqua-style window with titlebar and traffic light controls
 */

.window {
  display: flex;
  flex-direction: column;
  border-radius: 8px 8px 0 0;
  overflow: hidden;
  font-family: var(--font-system);
  font-size: var(--font-size-base);

  /* Window border */
  border: 1px solid rgba(0, 0, 0, 0.4);

  /* Window shadow */
  box-shadow:
    0 8px 25px rgba(0, 0, 0, 0.4),
    0 2px 8px rgba(0, 0, 0, 0.2);

  &.inactive {
    border-color: rgba(0, 0, 0, 0.2);
    box-shadow:
      0 4px 15px rgba(0, 0, 0, 0.2),
      0 1px 4px rgba(0, 0, 0, 0.1);

    .title-bar {
      background: linear-gradient(
        to bottom,
        #f6f6f6 0%,
        #e0e0e0 100%
      );
      border-bottom-color: rgba(0, 0, 0, 0.2);
    }

    .title-bar-controls button {
      background: linear-gradient(
        rgba(160, 160, 160, 0.625),
        rgba(200, 200, 200, 0.625),
        rgba(180, 180, 180, 0.625)
      ) !important;
      box-shadow:
        0 0.125em 0.2em rgba(0, 0, 0, 0.3),
        0 0.0625em 0.0625em rgba(0, 0, 0, 0.2),
        inset 0 0.125em 0.2em rgba(0, 0, 0, 0.4),
        inset 0 0.15em 0.25em 0.1em rgba(150, 150, 150, 0.75) !important;
    }

    .title-bar-text {
      color: #7f7f7f;
    }
  }

  &.brushed-metal {
    .window-body {
      background: linear-gradient(
        to bottom,
        #e8e8e8 0%,
        #d0d0d0 50%,
        #c8c8c8 100%
      );
      background-image: none;
    }
  }
}

.window-body {
  flex: 1;
  padding: 16px;
  overflow: auto;
  background: #ececec;
}

/* Title Bar */
.title-bar {
  display: flex;
  align-items: center;
  height: 22px;
  padding: 0 8px;
  gap: 8px;

  /* Gradient background with pinstripes */
  background: linear-gradient(
    to bottom,
    #e8e8e8 0%,
    #d0d0d0 100%
  );
  background-image:
    linear-gradient(
      to bottom,
      rgba(255, 255, 255, 0.3) 0%,
      rgba(219, 219, 219, 0.6) 70%,
      rgba(206, 206, 206, 0.7) 100%
    ),
    linear-gradient(
      to bottom,
      #e8e8e8 0%,
      #d0d0d0 100%
    );

  border-bottom: 1px solid rgba(0, 0, 0, 0.3);
}

.title-bar-text {
  flex: 1;
  text-align: center;
  font-size: var(--font-size-title);
  font-weight: 500;
  color: #000;
  text-shadow: 0 1px 0 rgba(255, 255, 255, 0.5);
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  user-select: none;
}

/* Spacer to center title */
.title-bar-spacer {
  width: 54px;
}

/* Traffic Light Controls */
.title-bar-controls {
  display: flex;
  gap: 8px;

  &:hover button {
    /* Show icons on hover */
    .icon {
      opacity: 1;
    }
  }

  button {
    position: relative;
    width: 14px;
    height: 14px;
    border-radius: 50%;
    border: none;
    padding: 0;
    min-width: 0;
    min-height: 0;
    cursor: pointer;
    overflow: visible;
    transition: all 0.15s ease;
    background: none;
    font-size: 14px;

    /* Icon inside button */
    .icon {
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -55%);
      font-size: 8px;
      font-weight: bold;
      line-height: 1;
      opacity: 0;
      z-index: 10;
      transition: opacity 0.1s ease;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    }

    /* Top shine on buttons */
    &::before {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      height: 40%;
      background: linear-gradient(
        rgba(255, 255, 255, 0.9),
        rgba(255, 255, 255, 0.2)
      );
      width: 70%;
      border-radius: 50% 50% 30% 30%;
      top: 8%;
      filter: blur(0.5px);
      z-index: 2;
      pointer-events: none;
    }

    /* Bottom glow on buttons */
    &::after {
      content: '';
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      height: 30%;
      background: linear-gradient(
        rgba(255, 255, 255, 0.1),
        rgba(255, 255, 255, 0.4)
      );
      width: 60%;
      border-radius: 50%;
      bottom: 10%;
      filter: blur(1px);
      pointer-events: none;
    }

    /* Close button - Red */
    &[aria-label="Close"] {
      background: linear-gradient(
        rgb(193, 58, 45),
        rgb(205, 73, 52)
      );
      box-shadow:
        0 0.125em 0.2em rgba(0, 0, 0, 0.3),
        0 0.0625em 0.0625em rgba(150, 40, 30, 0.5),
        inset 0 0.125em 0.2em rgba(150, 40, 30, 0.8),
        inset 0 0.15em 0.25em 0.1em rgba(225, 70, 64, 0.75);

      .icon {
        color: #4d0f0a;
        text-shadow: 0 1px 0 rgba(255, 150, 150, 0.3);
      }

      &:hover {
        background: linear-gradient(
          rgb(213, 78, 65),
          rgb(225, 93, 72)
        );
      }
    }

    /* Minimize button - Yellow */
    &[aria-label="Minimize"] {
      background: linear-gradient(
        rgb(202, 130, 13),
        rgb(253, 253, 149)
      );
      box-shadow:
        0 0.125em 0.2em rgba(0, 0, 0, 0.3),
        0 0.0625em 0.0625em rgba(155, 78, 21, 0.5),
        inset 0 0.125em 0.2em rgba(155, 78, 21, 0.8),
        inset 0 0.15em 0.25em 0.1em rgba(241, 157, 20, 0.75);

      .icon {
        color: #5a4005;
        text-shadow: 0 1px 0 rgba(255, 220, 150, 0.3);
      }

      &:hover {
        background: linear-gradient(
          rgb(222, 150, 33),
          rgb(255, 255, 169)
        );
      }
    }

    /* Zoom/Maximize button - Green */
    &[aria-label="Maximize"],
    &[aria-label="Zoom"] {
      background: linear-gradient(
        rgb(111, 174, 58),
        rgb(138, 192, 50)
      );
      box-shadow:
        0 0.125em 0.2em rgba(0, 0, 0, 0.3),
        0 0.0625em 0.0625em rgba(53, 91, 17, 0.5),
        inset 0 0.125em 0.2em rgba(53, 91, 17, 0.8),
        inset 0 0.15em 0.25em 0.1em rgba(98, 187, 19, 0.75);

      .icon {
        color: #0a4d12;
        text-shadow: 0 1px 0 rgba(150, 255, 150, 0.3);
      }

      &:hover {
        background: linear-gradient(
          rgb(131, 194, 78),
          rgb(158, 212, 70)
        );
      }
    }

    &:active:not(:disabled) {
      filter: brightness(0.85);
    }
  }
}

/* Toolbar */
.toolbar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  min-height: 32px;

  /* Brushed metal texture */
  background: linear-gradient(
    to bottom,
    #e8e8e8 0%,
    #d0d0d0 50%,
    #c8c8c8 100%
  );

  border-bottom: 1px solid rgba(0, 0, 0, 0.2);
  box-shadow:
    inset 0 1px 0 rgba(255, 255, 255, 0.5),
    inset 0 -1px 0 rgba(0, 0, 0, 0.1);
}

/* Status Bar */
.status-bar {
  display: flex;
  align-items: center;
  gap: 8px;
  padding: 4px 8px;
  min-height: 20px;
  font-size: var(--font-size-small);
  color: #666;

  background: linear-gradient(
    to bottom,
    #e0e0e0 0%,
    #d8d8d8 100%
  );

  border-top: 1px solid rgba(0, 0, 0, 0.15);
  box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.5);
}

/* Sheet variant (modal attached to window) */
.window.sheet {
  border-radius: 0 0 8px 8px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.35);

  .title-bar {
    display: none;
  }
}

/* Utility window variant (smaller, no pinstripes) */
.window.utility {
  border-radius: 4px 4px 0 0;

  .title-bar {
    height: 16px;
    padding: 0 4px;
    gap: 4px;
  }

  .title-bar-controls button {
    width: 10px;
    height: 10px;
  }

  .title-bar-text {
    font-size: 11px;
  }

  .title-bar-spacer {
    width: 38px;
  }

  .window-body {
    background: #ececec;
    background-image: none;
  }
}
