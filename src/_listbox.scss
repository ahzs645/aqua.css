/**
 * Listbox
 * Multi-select list using select[multiple] or role="listbox"
 */

[role="listbox"],
select[multiple] {
  background: var(--listbox-bg);
  border: 1px solid var(--listbox-border);
  border-radius: var(--radius-small);
  display: block;
  font-family: var(--font-ui);
  font-size: var(--font-size-base);
  overflow-y: auto;
  box-shadow: var(--inset-shadow);
  padding: 2px;
  min-height: 80px;

  &:focus {
    border-color: var(--aqua-blue);
    box-shadow: var(--inset-shadow), var(--listbox-focus-shadow);
    outline: none;
  }

  [role="option"],
  option {
    padding: 4px 8px;
    cursor: default;
    border-radius: var(--radius-small);

    &[aria-selected="true"],
    &:checked,
    &:focus {
      background: var(--listbox-option-selected-bg);
      color: var(--listbox-option-selected-text);
    }

    &:hover:not([aria-selected="true"]):not(:checked) {
      background: var(--listbox-option-hover-bg);
    }
  }
}

/* ============================================
   AQUA LISTBOX (Mac OS 10.1 Style)
   Classic listbox with striped rows and wave scrollbar
   ============================================ */

.aqua-listbox {
  position: relative;
  background: #fff;
  border: 1px solid #888;
  border-radius: 3px;
  overflow: hidden;
  box-shadow: inset 0 1px 3px rgba(0, 0, 0, 0.15);
}

.aqua-listbox-content {
  width: 100%;
  height: 100%;
  overflow-y: scroll;
  padding-right: 22px; /* Space for custom scrollbar */
  scrollbar-width: none; /* Firefox */
}

.aqua-listbox-content::-webkit-scrollbar {
  display: none;
}

.aqua-listbox-list {
  list-style: none;
  margin: 0;
  padding: 0;
}

.aqua-listbox-item {
  padding: 2px 8px;
  margin: 0;
  cursor: default;
  font-family: var(--font-ui);
  font-size: var(--font-size-base);
  line-height: 1.3;
  background: #fff;
  user-select: none;
}

.aqua-listbox-item:hover:not(.selected) {
  background: rgba(0, 0, 0, 0.04);
}

.aqua-listbox-item.selected {
  background: #808080;
  color: #fff;
}

/* ===== Aqua Listbox Scrollbar (uses unified scrollbar components) ===== */

/* Scrollbar top cap - positioned absolutely inside listbox */
.aqua-listbox .scrollbar-cap {
  --w: 18px;
  --btn-height: 15px;
  --radius: 9px;
  --padding: 1px;
  position: absolute;
  top: var(--padding);
  right: var(--padding);
  width: var(--w) !important;
  height: var(--btn-height) !important;
  background: linear-gradient(90deg, rgba(160, 160, 160, 0.625), rgba(255, 255, 255, 0.625));
  box-shadow: inset 0.375em 0 0.5em 0 rgba(0, 0, 0, 0.4),
              inset -0.375em 0 0.5em 0.25em #BBBBBB;
  border-radius: 0;
  z-index: 1;
  flex-shrink: 0;
}

/* Scrollbar Track - positioned absolutely inside listbox */
.aqua-listbox .scrollbar-track {
  --w: 18px;
  --radius: 9px;
  --padding: 1px;
  --btn-height: 15px;
  position: absolute;
  top: calc(var(--padding) + var(--btn-height) - var(--radius));
  right: var(--padding);
  bottom: calc(var(--padding) + var(--btn-height) + var(--btn-height));
  width: var(--w) !important;
  flex: none;
  margin: 0;
  border-radius: var(--radius);
  background: linear-gradient(90deg, #d6d6d6, #e8e8e8, #fafafa);
  box-shadow:
    inset 4px 0 10px rgba(0,0,0,0.16),
    inset 0 4.5px 8px rgba(0,0,0,0.15),
    inset 0 -4.5px 8px rgba(0,0,0,0.15);
  overflow: hidden;
  z-index: 2;
}

/* Scrollbar Arrow Buttons Container - positioned absolutely inside listbox */
.aqua-listbox .scrollbar-buttons {
  --w: 18px;
  --btn-height: 15px;
  --radius: 9px;
  --padding: 1px;
  position: absolute;
  right: var(--padding);
  bottom: var(--padding);
  width: var(--w) !important;
  height: calc(var(--btn-height) * 2 + var(--radius)) !important;
  display: flex;
  flex-direction: column;
  background: linear-gradient(90deg, rgba(160, 160, 160, 0.625), rgba(255, 255, 255, 0.625));
  box-shadow: inset 0.375em 0 0.5em 0 rgba(0, 0, 0, 0.4),
              inset -0.375em 0 0.5em 0.25em #BBBBBB;
  z-index: 1;
}

.aqua-listbox .scrollbar-buttons button {
  flex: 1;
  width: 100%;
}

.aqua-listbox .scrollbar-buttons button:first-child {
  padding-top: var(--radius);
}
