/* ============================================
   SLIDER / RANGE INPUT
   ============================================ */

@use "mixins" as *;

// Slider CSS Variables
:root {
  --slider-track-gradient: linear-gradient(
    to bottom,
    rgb(147, 147, 147),
    rgb(217, 217, 217)
  );
  --slider-track-gradient-vertical: linear-gradient(
    to right,
    rgb(147, 147, 147),
    rgb(217, 217, 217)
  );
  --slider-track-border: rgb(111, 111, 111) rgb(171, 171, 171) rgb(171, 171, 171) rgb(111, 111, 111);
  --slider-thumb-border: rgb(100, 103, 124);

  // Blue Aqua gradient matching .aqua-button.default (3D gel style) - OPAQUE version
  --slider-thumb-gradient: linear-gradient(
    rgb(0, 65, 184),
    rgb(45, 115, 199),
    rgb(33, 160, 196)
  );
  --slider-thumb-shadow: var(--aqua-button-primary-shadow);

  // Darker blue for active/pressed state - OPAQUE version
  --slider-thumb-active-gradient: linear-gradient(
    rgb(0, 45, 140),
    rgb(25, 85, 165),
    rgb(0, 110, 160)
  );
  --slider-thumb-active-shadow: var(--aqua-button-primary-shadow-active);

  --slider-tick: rgb(146, 146, 146);

  // Pointer thumb - fill mask (for gradient)
  --slider-thumb-pointer-mask: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 17 19'%3E%3Cpath d='M8.5 18.5 C14.5 12 16.5 10.5 16.5 9 L16.5 3 C16.5 1.5 15.5 0.5 14 0.5 L3 0.5 C1.5 0.5 0.5 1.5 0.5 3 L0.5 9 C0.5 10.5 2.5 12 8.5 18.5 Z' fill='white'/%3E%3C/svg%3E");
  --slider-thumb-pointer-mask-vertical: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 19 17'%3E%3Cpath d='M18.5 8.5 C12 14.5 10.5 16.5 9 16.5 L3 16.5 C1.5 16.5 0.5 15.5 0.5 14 L0.5 3 C0.5 1.5 1.5 0.5 3 0.5 L9 0.5 C10.5 0.5 12 2.5 18.5 8.5 Z' fill='white'/%3E%3C/svg%3E");

  // Pointer thumb - border only (stroke, no fill)
  --slider-thumb-pointer-border: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 17 19'%3E%3Cpath d='M8.5 18.5 C14.5 12 16.5 10.5 16.5 9 L16.5 3 C16.5 1.5 15.5 0.5 14 0.5 L3 0.5 C1.5 0.5 0.5 1.5 0.5 3 L0.5 9 C0.5 10.5 2.5 12 8.5 18.5 Z' fill='none' stroke='rgb(100,103,124)' stroke-width='1'/%3E%3C/svg%3E");
  --slider-thumb-pointer-border-vertical: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 19 17'%3E%3Cpath d='M18.5 8.5 C12 14.5 10.5 16.5 9 16.5 L3 16.5 C1.5 16.5 0.5 15.5 0.5 14 L0.5 3 C0.5 1.5 1.5 0.5 3 0.5 L9 0.5 C10.5 0.5 12 2.5 18.5 8.5 Z' fill='none' stroke='rgb(100,103,124)' stroke-width='1'/%3E%3C/svg%3E");

  // Gloss overlay for native input thumbs (CSS-only glass effect matching aqua-glass 'round')
  // Combined shine + glow as a single linear gradient overlay
  --slider-thumb-gloss: linear-gradient(
    to bottom,
    rgba(255, 255, 255, 0.9) 0%,
    rgba(255, 255, 255, 0.6) 15%,
    rgba(255, 255, 255, 0.2) 40%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0.1) 70%,
    rgba(255, 255, 255, 0.4) 100%
  );
}

/* Native range input */
input[type="range"],
.aqua-slider,
.slider {
  -webkit-appearance: none;
  appearance: none;
  width: 200px;
  height: 4px;
  background: var(--slider-track-gradient);
  border: 0.5px solid;
  border-color: var(--slider-track-border);
  border-radius: 2.5px;
  outline: none;

  /* Webkit thumb (Chrome, Safari, Edge) */
  &::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 17px;
    height: 17px;
    border: 0.5px solid var(--slider-thumb-border);
    border-radius: 50%;
    background:
      var(--slider-thumb-gloss),
      var(--slider-thumb-gradient);
    cursor: pointer;
    box-shadow: var(--slider-thumb-shadow);
  }

  &::-webkit-slider-thumb:active {
    background:
      var(--slider-thumb-gloss),
      var(--slider-thumb-active-gradient);
    box-shadow: var(--slider-thumb-active-shadow);
  }

  /* Mozilla thumb (Firefox) */
  &::-moz-range-thumb {
    width: 17px;
    height: 17px;
    border: 0.5px solid var(--slider-thumb-border);
    border-radius: 50%;
    background:
      var(--slider-thumb-gloss),
      var(--slider-thumb-gradient);
    cursor: pointer;
    box-shadow: var(--slider-thumb-shadow);
  }

  &::-moz-range-thumb:active {
    background:
      var(--slider-thumb-gloss),
      var(--slider-thumb-active-gradient);
    box-shadow: var(--slider-thumb-active-shadow);
  }

  /* Mozilla track */
  &::-moz-range-track {
    height: 4px;
    background: var(--slider-track-gradient);
    border: 0.5px solid;
    border-color: var(--slider-track-border);
    border-radius: 2.5px;
  }

  &:disabled {
    opacity: 0.5;
    pointer-events: none;
    cursor: not-allowed;

    &::-webkit-slider-thumb {
      cursor: not-allowed;
    }
    &::-moz-range-thumb {
      cursor: not-allowed;
    }
  }
}

/* Vertical slider */
input[type="range"].vertical,
.aqua-slider.vertical,
.slider.vertical {
  writing-mode: vertical-lr;
  direction: rtl;
  width: 4px;
  height: 150px;
  background: var(--slider-track-gradient-vertical);
}

/* ============================================
   Custom slider (div-based with pointer thumb)
   ============================================ */

.aqua-slider-custom {
  position: relative;
  width: 200px;
  height: 20px;
  display: flex;
  align-items: center;

  .track {
    width: 100%;
    height: 4px;
    background: var(--slider-track-gradient);
    border: 0.5px solid;
    border-color: var(--slider-track-border);
    border-radius: 2.5px;
    position: relative;
  }

  .thumb {
    position: absolute;
    width: 17px;
    height: 17px;
    border: 0.5px solid var(--slider-thumb-border);
    border-radius: 50%;
    background: var(--slider-thumb-gradient);
    cursor: pointer;
    box-shadow: var(--slider-thumb-shadow);
    top: 50%;
    transform: translate(-50%, -50%);
    left: 50%;
    overflow: hidden;

    // Shimmer element for gloss (matching aqua-glass 'round' preset)
    .shimmer {
      position: absolute;
      inset: 0;
      pointer-events: none;
      border-radius: inherit;

      // Top shine: 40% height, 75% width, at top 8%, opacity 0.8→0.15
      &::before {
        content: '';
        position: absolute;
        top: 8%;
        left: 12.5%;
        right: 12.5%;
        height: 40%;
        background: linear-gradient(
          rgba(255, 255, 255, 0.8),
          rgba(255, 255, 255, 0.15)
        );
        border-radius: 50% 50% 30% 30%;
        filter: blur(0.5px);
        z-index: 2;
      }

      // Bottom glow: 35% height, 70% width, at bottom 10%, opacity 0.1→0.35
      &::after {
        content: '';
        position: absolute;
        bottom: 10%;
        left: 15%;
        right: 15%;
        height: 35%;
        background: linear-gradient(
          rgba(255, 255, 255, 0.1),
          rgba(255, 255, 255, 0.35)
        );
        border-radius: 30% 30% 50% 50%;
        filter: blur(1px);
      }
    }
  }

  .thumb:active {
    background: var(--slider-thumb-active-gradient);
    box-shadow: var(--slider-thumb-active-shadow);
  }

  .ticks {
    position: absolute;
    width: 100%;
    top: 100%;
    margin-top: 6px;
    display: flex;
    justify-content: space-between;
    padding: 0;
    box-sizing: border-box;
  }

  .tick {
    width: 1px;
    height: 4px;
    background: var(--slider-tick);
  }

  &.disabled {
    opacity: 0.5;
    pointer-events: none;
  }

  &.vertical {
    width: 20px;
    height: 150px;
    flex-direction: column;

    .track {
      width: 4px;
      height: 100%;
      background: var(--slider-track-gradient-vertical);
      border-color: var(--slider-track-border);
    }

    .thumb {
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
    }

    .ticks {
      top: 0;
      left: 100%;
      margin-left: 6px;
      margin-top: 0;
      width: auto;
      height: 100%;
      flex-direction: column;
      padding: 0;
    }

    .tick {
      width: 4px;
      height: 1px;
    }
  }

  /* Pointer/alternative thumb style - uses ::before for fill, ::after for border */
  &.alternative-thumb {
    .thumb {
      width: 17px;
      height: 19px;
      border: none;
      border-radius: 0;
      overflow: visible;
      background: none;
      box-shadow: none;
      /* Drop shadow for depth */
      filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.3)) drop-shadow(0 2px 2px rgba(0, 0, 0, 0.15));
      /* Center horizontally, position tip near track */
      transform: translate(-50%, -35%);

      // Fill layer (::before with mask)
      &::before {
        content: '';
        position: absolute;
        inset: 0;
        background: var(--slider-thumb-gradient);
        -webkit-mask-image: var(--slider-thumb-pointer-mask);
        mask-image: var(--slider-thumb-pointer-mask);
        -webkit-mask-size: contain;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        -webkit-mask-position: center;
        mask-position: center;
      }

      // Border layer (::after with stroke SVG)
      &::after {
        content: '';
        position: absolute;
        inset: 0;
        background-image: var(--slider-thumb-pointer-border);
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        pointer-events: none;
      }

      // Shimmer adjustments for pointer shape
      .shimmer {
        z-index: 1;
        -webkit-mask-image: var(--slider-thumb-pointer-mask);
        mask-image: var(--slider-thumb-pointer-mask);
        -webkit-mask-size: contain;
        mask-size: contain;
        -webkit-mask-repeat: no-repeat;
        mask-repeat: no-repeat;
        -webkit-mask-position: center;
        mask-position: center;

        &::before {
          content: '';
          position: absolute;
          top: 5%;
          left: 15%;
          right: 15%;
          height: 40%;
          background: linear-gradient(
            rgba(255, 255, 255, 0.9),
            rgba(255, 255, 255, 0.2)
          );
          border-radius: 40% 40% 20% 20%;
          filter: blur(0.5px);
        }

        &::after {
          content: '';
          position: absolute;
          bottom: 20%;
          left: 20%;
          right: 20%;
          height: 35%;
          background: linear-gradient(
            rgba(255, 255, 255, 0.1),
            rgba(255, 255, 255, 0.45)
          );
          border-radius: 20% 20% 40% 40%;
          filter: blur(0.8px);
        }
      }
    }

    .thumb:active::before {
      background: var(--slider-thumb-active-gradient);
    }

    .thumb:active {
      filter: drop-shadow(0 1px 1px rgba(0, 0, 0, 0.2)) drop-shadow(0 1px 2px rgba(0, 102, 204, 0.3));
    }

    // Vertical orientation
    &.vertical .thumb {
      width: 19px;
      height: 17px;
      transform: translate(-35%, -50%);
      filter: drop-shadow(1px 0 1px rgba(0, 0, 0, 0.3)) drop-shadow(2px 0 2px rgba(0, 0, 0, 0.15));

      &::before {
        -webkit-mask-image: var(--slider-thumb-pointer-mask-vertical);
        mask-image: var(--slider-thumb-pointer-mask-vertical);
      }

      &::after {
        background-image: var(--slider-thumb-pointer-border-vertical);
      }

      .shimmer {
        -webkit-mask-image: var(--slider-thumb-pointer-mask-vertical);
        mask-image: var(--slider-thumb-pointer-mask-vertical);
      }
    }

    &.vertical .thumb:active {
      filter: drop-shadow(1px 0 1px rgba(0, 0, 0, 0.2)) drop-shadow(1px 0 2px rgba(0, 102, 204, 0.3));
    }
  }

  &.show-ticks {
    margin-bottom: 25px;

    &.vertical {
      margin-bottom: 0;
      margin-right: 30px;
    }
  }
}
